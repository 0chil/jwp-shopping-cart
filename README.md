# jwp-shopping-cart

## 기능 목록

### 컨트롤러

- 웹페이지
    - 상품 목록 `/`
    - 관리자 `/admin`
    - 설정 `/settings`
- API
    - 추가 `POST /products`
    - 수정 `PUT /products/{id}`
    - 삭제 `DELETE /products/{id}`
    - 상품 요청 페이로드
        - 이름은 필수이다.
        - 이미지는 필수이다.
            - 2000글자 이내이다.
            - URL이어야 한다.
        - 가격은 필수이다.
    - 장바구니 상품 추가
    - 장바구니 상품 제거

### 사용자

사용자 도메인 모델을 표현한다.

- 이메일, 패스워드를 담는다.

### 사용자 DAO

- 사용자를 삽입한다.
    - [ ] 사용자가 이미 존재할 경우 예외를 던진다. -> 어디서 처리할지 고민해본다.
- 사용자를 전체 조회한다.

### 상품

- 이름은 20글자 이하이다.
- 금액은 1,000,000원 이하이다.
- Id로 식별한다. (객체의 식별이 테이블 PK에 종속될텐데, 이래도 되는지 의문입니다!)

### 상품 DAO

상품 DB에 대한 저장, 조회, 삭제 로직을 추상화 및 캡슐화한다.

- 상품을 저장한다
- 상품 하나를 조회한다
- 모든 상품을 조회한다
- 상품을 수정한다
    - 수정된 상품 수를 반환한다.
- 상품을 제거한다
    - 제거된 상품 수를 반환한다.

### 상품 Repository

상품 DAO 사용, 예외, 도메인의 저장, 조회, 삭제를 추상화 및 캡슐화한다.

- 상품을 저장한다.
- 상품을 전체 조회한다.
- 상품을 수정한다.
    - 수정된 대상이 없으면 예외를 던진다.
- 상품을 제거한다.
    - 제거된 대상이 없으면 예외를 던진다.

### 장바구니

- 상품을 추가한다.
- 상품을 제거한다. - 상품을 무엇으로 식별해야 하는가
- 상품들을 가져온다.

### 장바구니 서비스

- 장바구니에 상품을 추가한다.
    - 특정 유저의 장바구니를 가져온다.
    - 장바구니에 추가한다.
    - 장바구니를 저장한다.

- 장바구니에서 상품을 제거한다.
    - 특정 유저의 장바구니를 가져온다.
    - 장바구니에서 물품을 제거한다.
    - 장바구니를 저장한다.

- 장바구니를 가져온다.
    - 특정 유저의 장바구니를 가져온다.

### 장바구니 아이템 DAO

- 유저의 장바구니 아이템을 저장한다.
- 유저의 장바구니 아이템을 가져온다.
- 유저의 장바구니 아이템을 비운다.

## 학습 + 복습

### Service 레이어의 필요성

- 여러 도메인이 연관되는 비즈니스 로직은 수행하는 방법도 간단하지 않으며, 로직 실행 순서마저 비즈니스 로직이다. (절차)
- 따라서 이런 비즈니스 로직을 수행하는 방법에 대한 관심사를 분리하고 캡슐화하기 위해 서비스 레이어가 필요하다. (이것이 도메인 서비스일까요?)

### DAO가 도메인에 의존성을 가지지 않아야 할 이유 체감하기, 간단한 도메인도 Repository가 필요한지 체감하기

- UserRepository를 만들지 않는다.
- User 도메인을 그대로 전달하고, 조회할때도 완전한 도메인을 만들어 반환해준다.

- 후기
    - (...)

### Repository의 역할 체감하기

**DAO에 도메인 객체 구성 및 반환, 도메인 객체를 저장할 책임을 부여해본다.**

- 요구 사항
    - CartRepository를 만들지 않는다.

- 후기
    - Cart는 여러 도메인들이 연관된 도메인이므로, 이 도메인을 조회하고 구성하는 것은 간단하지는 않다. (뚝딱 불가능)
    - 따라서 (Cart 도메인을 저장하고, 꺼내는 방법)을 캡슐화해서 관심사를 분리할 필요가 있다.